job("Build and publish") {
    docker {
        // build and publish tplmap
        build {
            context = "docker"
            file = "./tplmap/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/tplmap") {
            tag = "latest"
        }
    }

    docker {
        // build and publish ssrfmap
        build {
            context = "docker"
            file = "./ssrfmap/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/ssrfmap") {
            tag = "latest"
        }
    }
}