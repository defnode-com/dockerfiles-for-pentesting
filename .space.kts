job("Build and publish") {
    docker {
        // build and publish tplmap
        build {
            context = "docker"
            file = "./tplmap/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/tplmap") {
            tag = "latest"
        }
    }

    docker {
        // build and publish ssrfmap
        build {
            context = "docker"
            file = "./ssrfmap/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/ssrfmap") {
            tag = "latest"
        }
    }

    docker {
        // build and publish xsrfprobe
        build {
            context = "docker"
            file = "./xsrfprobe/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/xsrfprobe") {
            tag = "latest"
        }
    }

    docker {
        // build and publish sslyze
        build {
            context = "docker"
            file = "./sslyze/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/sslyze") {
            tag = "latest"
        }
    }

    docker {
        // build and publish sqlmap
        build {
            context = "docker"
            file = "./sqlmap/dockerfile"
            labels["vendor"] = "defnode.com"
        }

        push("defnode.registry.jetbrains.space/p/dfnd/defnode/sqlmap") {
            tag = "latest"
        }
    }
}